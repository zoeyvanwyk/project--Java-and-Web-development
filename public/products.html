<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Products Page</title>

        <!--CSS-->
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.4.1/dist/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
        <link rel="stylesheet" href="products.css">

    </head>
    <body>
        <h1 id="category-title">Loading...</h1>


        
        <!-- The rest of your products page content -->
        <script>
            // Function to get query parameters
            function getQueryParams() {
                const params = {};
                const queryString = window.location.search.substring(1);
                const queryArray = queryString.split("&");
                queryArray.forEach(param => {
                    const [key, value] = param.split("=");
                    params[key] = decodeURIComponent(value);
                });
                return params;
            }
    
            // Function to fetch category name from the server
            async function fetchCategoryName(categoryId) {
                try {
                    const response = await fetch(`http://localhost:3000/api/category/${categoryId}`);
                    console.log(`Fetching category name for ID: ${categoryId}`);
                    if (response.ok) {
                        const data = await response.json();
                        console.log('Fetched category name:', data.categoryName);
                        return data.categoryName;
                    } else {
                        console.log('Category not found');
                        return 'Unknown Category';
                    }
                } catch (error) {
                    console.error('Error fetching category name:', error);
                    return 'Unknown Category';
                }
            }
    
            // Get the category ID from URL
            const queryParams = getQueryParams();
            const categoryId = queryParams.category;
            console.log('Category ID from URL:', categoryId);
    
            // Fetch the category name and display it
            fetchCategoryName(categoryId).then(categoryName => {
                const categoryTitleElement = document.getElementById("category-title");
                categoryTitleElement.textContent = categoryName;
            });
        </script>
    </body>
    </html>
